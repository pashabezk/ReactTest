"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[477],{8477:function(e,t,s){s.r(t),s.d(t,{default:function(){return V},withRouter:function(){return J}});var n=s(5671),i=s(3144),r=s(136),o=s(516),a=s(8683),u=s(2791),l=s(885),c="ProfileInfo_ava__hQu4n",d="ProfileInfo_contact__H164O",h=s(8587),p=s(184),f=function(e){var t=(0,u.useState)(!1),s=(0,l.Z)(t,2),n=s[0],i=s[1],r=(0,u.useState)(e.status),o=(0,l.Z)(r,2),a=o[0],c=o[1];(0,u.useEffect)((function(){c(e.status)}),[e.status]);return(0,p.jsx)("div",{children:n?(0,p.jsx)("div",{children:(0,p.jsx)("input",{onChange:function(e){c(e.currentTarget.value)},onBlur:function(){i(!1),e.updateStatus(a)},autoFocus:!0,value:a||""})}):(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Status: "}),(0,p.jsx)("span",{onDoubleClick:function(){i(!0)},children:e.status||"<\u0443\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u0442\u0430\u0442\u0443\u0441>"})]})})},x=s(4353),j=s(3186),m=s(5550),v=s(6139),b=s(704),g=s(1032),P=(0,b.Z)({form:"edit-profile",enableReinitialize:!0,destroyOnUnmount:!1})((function(e){var t=e.handleSubmit,s=e.initialValues,n=e.error;return(0,p.jsxs)("form",{onSubmit:t,children:[(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"save"})}),n&&(0,p.jsx)("div",{className:g.Z.formSummaryError,children:n}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Fullname: "}),(0,p.jsx)(v.Z,{component:j.II,name:"fullName",validate:[m.C],placeholder:"Full Name"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job: "}),(0,p.jsx)(v.Z,{component:j.II,type:"checkbox",name:"looKingForAJob"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Job skills:"}),(0,p.jsx)(v.Z,{component:j.gx,name:"lookingForAJobDescription",placeholder:"My skills"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me:"}),(0,p.jsx)(v.Z,{component:j.gx,name:"aboutMe",placeholder:"About me"})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts:"})," ",Object.keys(s.contacts).map((function(e){return(0,p.jsx)(v.Z,{component:j.II,name:"contacts."+e,placeholder:e},e)}))]})]})})),k=function(e){var t=e.contactTitle,s=e.contactValue;return(0,p.jsxs)("div",{className:d,children:[(0,p.jsxs)("b",{children:[t,": "]}),s]})},Z=function(e){var t=e.profile,s=e.isOwner,n=e.goToEditMode;return(0,p.jsxs)("div",{children:[s&&(0,p.jsx)("div",{children:(0,p.jsx)("button",{onClick:n,children:"edit"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Fullname:"})," ",t.fullName]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Looking for a job:"})," ",t.lookingForAJob?"yes":"no"]}),t.lookingForAJob&&(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"My professional skills:"})," ",t.lookingForAJobDescription]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"About me:"})," ",t.aboutMe]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("b",{children:"Contacts:"})," ",Object.keys(t.contacts).map((function(e){return(0,p.jsx)(k,{contactTitle:e,contactValue:t.contacts[e]},e)}))]})]})},S=function(e){var t=(0,u.useState)(!1),s=(0,l.Z)(t,2),n=s[0],i=s[1];return e.profile?(0,p.jsxs)("div",{children:[(0,p.jsx)("div",{children:(0,p.jsx)("img",{width:"600px",src:"https://interier-foto.ru/wp-content/uploads/dlinnye-foto-4.jpg",alt:"wp"})}),(0,p.jsxs)("div",{children:[(0,p.jsx)("img",{className:c,src:e.profile.photos.large||x,alt:"user ava"}),e.isOwner&&(0,p.jsx)("input",{type:"file",onChange:function(t){t.target.files[0]&&e.savePhoto(t.target.files[0])}}),n?(0,p.jsx)(P,{initialValues:e.profile,onSubmit:function(t){e.saveProfile(t).then((function(){i(!1)}))}}):(0,p.jsx)(Z,{profile:e.profile,isOwner:e.isOwner,goToEditMode:function(){i(!0)}}),(0,p.jsx)(f,{status:e.status,updateStatus:e.updateStatus})]})]}):(0,p.jsx)("div",{children:(0,p.jsx)(h.Z,{})})},w=s(6070),y={},I="Post_item__OU5Z8",A=function(e){return(0,p.jsx)("div",{className:I,children:e.message})};var C=(0,b.Z)({form:"ProfileAddNewPostForm"})((function(e){var t=(0,m.D)(10);return(0,p.jsxs)("form",{onSubmit:e.handleSubmit,children:[(0,p.jsx)("div",{children:(0,p.jsx)(v.Z,{component:j.gx,name:"newPostText",validate:[m.C,t],placeholder:"Post message"})}),(0,p.jsx)("div",{children:(0,p.jsx)("button",{children:"Add post"})})]})})),O=u.memo((function(e){var t=e.posts.map((function(e){return(0,p.jsx)(A,{message:e.message,likesCount:e.likesCount},e.id)}));return(0,p.jsxs)("div",{className:y.postsBlock,children:[(0,p.jsx)("h3",{children:"My posts"}),(0,p.jsx)(C,{onSubmit:function(t){e.addPost(t.newPostText)}}),(0,p.jsx)("div",{className:y.posts,children:t})]})})),F=s(8687),N=(0,F.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e((0,w.Wl)(t))}}}))(O),_=function(e){return(0,p.jsxs)("div",{children:[(0,p.jsx)(S,{profile:e.profile,isOwner:e.isOwner,status:e.status,updateStatus:e.updateStatus,savePhoto:e.savePhoto,saveProfile:e.saveProfile}),(0,p.jsx)(N,{})]})},T=s(7689),D=s(9625),M=s(7781);function J(e){return function(t){var s={params:(0,T.UO)()};return s.params.userId||(s.params.userId=t.userId),(0,p.jsx)(e,(0,a.Z)((0,a.Z)({},t),{},{match:s}))}}var U=function(e){(0,r.Z)(s,e);var t=(0,o.Z)(s);function s(){return(0,n.Z)(this,s),t.apply(this,arguments)}return(0,i.Z)(s,[{key:"refreshProfile",value:function(){var e=this.props.match.params.userId;this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,s){this.props.match.params.userId!==e.match.params.userId&&this.refreshProfile()}},{key:"render",value:function(){return(0,p.jsx)(_,(0,a.Z)((0,a.Z)({},this.props),{},{profile:this.props.profile,isOwner:!!this.props.match.params.userId,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),s}(u.Component),E={getUserProfile:w.et,getStatus:w.lR,updateStatus:w.Nf,savePhoto:w.Ju,saveProfile:w.Ii},V=(0,M.qC)((0,F.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,userId:e.auth.userId,isAuth:e.auth.isAuth}}),E),J,D.D)(U)},9625:function(e,t,s){s.d(t,{D:function(){return p}});var n=s(8683),i=s(5671),r=s(3144),o=s(136),a=s(516),u=s(2791),l=s(7689),c=s(8687),d=s(184),h=function(e){return{isAuth:e.auth.isAuth}},p=function(e){var t=function(t){(0,o.Z)(u,t);var s=(0,a.Z)(u);function u(){return(0,i.Z)(this,u),s.apply(this,arguments)}return(0,r.Z)(u,[{key:"render",value:function(){return this.props.isAuth?(0,d.jsx)(e,(0,n.Z)({},this.props)):(0,d.jsx)(l.Fg,{to:"/login"})}}]),u}(u.Component);return(0,c.$j)(h)(t)}},4353:function(e,t,s){e.exports=s.p+"static/media/user.76a001d0c402b5637a97.png"}}]);
//# sourceMappingURL=477.2ee5ecf8.chunk.js.map